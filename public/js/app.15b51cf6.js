(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},r={app:0},s=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e3e":function(t,e,a){"use strict";a("0f75")},"0f75":function(t,e,a){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},"184b":function(t,e,a){t.exports=a.p+"img/periometer-extra-hot.a10b3f92.svg"},"19ab":function(t,e,a){t.exports=a.p+"img/periometer-hot.34c79384.svg"},2:function(t,e){},3:function(t,e){},"30c0":function(t,e,a){t.exports=a.p+"img/barci.4fbcf184.svg"},"3dfd":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],s=a("2877"),i={},o=Object(s["a"])(i,n,r,!1,null,null,null);e["a"]=o.exports},4:function(t,e){},"4cbf":function(t,e,a){t.exports=a.p+"img/periometer-mild.6cc8920e.svg"},5:function(t,e){},5665:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"\n      relative\n      min-h-screen\n      font-mono\n      bg-gradient-to-r\n      from-blue-500\n      to-pink-500\n      flex flex-col\n      justify-center\n      relative\n      overflow-hidden\n      bg-top-left bg-origin-border bg-clip-border bg-fixed bg-center bg-cover\n    ",style:"\n    background-image: linear-gradient("+t.spotify.gradient+"), url('"+t.spotify.image+"');\n    "},[t.spotify.artistName&&"OK"===t.action.main?n("div",{staticClass:"\n        fixed\n        right-5\n        bottom-5\n        opacity-20\n        text-right text-white\n        tracking-tighter\n      "},[n("div",{staticClass:"artist-name font-sans text-9xl font-black"},[t._v(" "+t._s(t.spotify.artistName)+" ")]),n("div",{staticClass:"artist-name font-sans font-bold"},[t._v(" "+t._s(t.spotify.songTitle)+" ")])]):t._e(),n("div",{staticClass:"\n        pt-5\n        top-5\n        pr-3\n        pl-3\n        pb-5\n        max-w-md\n        rounded-none\n        sm:px-10\n        mx-auto\n        text-white\n        z-20\n        xl:fixed\n        font-mono\n        sm:max-w-lg\n      "},["OK"===t.action.main?n("div",[n("div",{staticClass:"\n            audioStats\n            bg-black bg-opacity-20\n            grid grid-cols-1\n            text-right\n            pr-2\n            pb-2\n          "},[n("div",{staticClass:"stats-artist mb-3 mt-3 pr-5 pl-5 xl:pr-1"},[t.spotify.artistName?n("div",{staticClass:"top-date"},[n("span",{staticClass:"font-extrabold text-xl"},[t._v(t._s(t.spotify.artistName))]),n("br"),n("span",{staticClass:"text-sm"},[t._v(t._s(t.spotify.songTitle))]),n("br"),n("span",{staticClass:"text-sm"},[t._v(t._s(t.spotify.albumName))])]):t._e()]),n("Positiveness",{attrs:{"audio-features":t.spotify.audioFeatures,"main-text":"Positiveness","key-positive":"valence"}}),n("Positiveness",{attrs:{"audio-features":t.spotify.audioFeatures,"main-text":"Danceability","key-positive":"danceability"}}),n("Positiveness",{attrs:{"audio-features":t.spotify.audioFeatures,"main-text":"Energy","key-positive":"energy"}}),n("div",{staticClass:"peri-total pb-3"},[t.spotify.audioFeatures?n("div",{staticClass:"`positiveness positiveness-total pt-1 pb-4`"},[t._v(" Total: "+t._s(t.spotify.periTotal.percentage)+"% - "),n("span",{staticClass:"pl-3 pr-3 text-white mr-5",style:"background-color:"+t.spotify.periTotal.peri.color},[t._v(" "+t._s(t.spotify.periTotal.peri.title))])]):t._e()])],1)]):t._e(),t.current.data.user?n("div",{staticClass:"\n          grid grid-flow-row-dense grid-cols-4 grid-rows-1\n          bg-black bg-opacity-30\n        "},[t._.get(t.current,"data.user.data.images[0]")?n("div",{},[n("div",{staticClass:"md:shrink-0"},[n("img",{staticClass:"pl-0",staticStyle:{width:"90px"},attrs:{src:t.current.data.user.data.images[0].url,alt:t.current.data.user.data.display_name}})])]):t._e(),n("div",{staticClass:"col-span-3"},[n("div",{staticClass:"pt-2 pl-5"},[n("div",{staticClass:"\n                uppercase\n                tracking-wide\n                text-sm text-white\n                font-normal\n                text-center\n              "},[t._v(" "+t._s(t.current.data.user.data.display_name)+" "),n("small",[n("a",{staticClass:"mr-2 text-xs underline",attrs:{href:"javascript:void(0)",title:"Logout"},on:{click:t.logout}},[t._v("Logout")])])]),n("div",{staticClass:"text-center top-date font-light text-xs mt-2 italic"},[t._v(" "+t._s(t.now)+" ")])])])]):t._e()]),n("div",{staticClass:"\n        relative\n        px-6\n        pt-5\n        pb-8\n        bg-white bg-opacity-70\n        shadow-xl\n        sm:max-w-xl sm:mx-auto sm:px-8\n        rounded-none\n      "},[n("div",{staticClass:"max-w-md mx-auto"},[n("div",["LOADING"===t.action.main?n("div",{staticClass:"text-center pt-5 pb-5 animate-pulse"},[t._m(0),n("h2",{staticClass:"text-2xl text-black"},[t._v("Loading...")])]):t._e(),"OK"===t.action.main?n("div",{staticClass:"grid grid-cols-1 gap-3 place-items-center"},[n("Transition",{attrs:{name:"fade",mode:"out-in"}},[n("div",[t.spotify.audioFeatures?n("img",{staticClass:"mb-10",attrs:{src:t.imagePath(t.spotify.periTotal.peri.title),alt:t.spotify.periTotal.peri.title}}):t._e()])]),n("div",{staticClass:"grid grid-cols-2 gap-3 place-items-top"},[n("div",[n("Transition",{attrs:{name:"fade",mode:"out-in"}},[n("Albumcover",{attrs:{spotify:t.spotify,"peri-ometer":t.spotify.periTotal.peri.title}})],1)],1),t._.get(t.listeners,"[0].foodData[0]")?n("div",[n("Transition",{attrs:{name:"fade",mode:"out-in"}},[n("Menucover",{attrs:{listeners:t.listeners}})],1)],1):t._e()]),n("Hungry",{staticClass:"mt-10",attrs:{"peri-ometer":t.spotify.periTotal.peri.title}}),n("button",{staticClass:"rounded-none bg-black pl-5 pr-5"},[t.current.data.user?n("ShareNetwork",{staticClass:"text-white",attrs:{network:"facebook",url:""+t.spotify.trackUrl,title:"Listening to "+t.spotify.artistName,description:"This song is great!",quote:"Listening to "+t.spotify.periTotal.peri.title+"'s "+t.spotify.artistName,hashtags:t.spotify.artistName.replace(/\s/g,"")+", nando's"}},[t._v(" Share on Facebook ")]):t._e()],1),n("button",{staticClass:"rounded-none bg-black pl-5 pr-5"},[t.current.data.user?n("ShareNetwork",{staticClass:"text-white",attrs:{network:"twitter",url:""+t.spotify.trackUrl,title:"Listening to "+t.spotify.periTotal.peri.title+"'s "+t.spotify.artistName+" - "+t.spotify.songTitle,description:"This song is great!",quote:"Listening to "+t.spotify.periTotal.peri.title+"'s "+t.spotify.artistName,hashtags:t.spotify.artistName.replace(/\s/g,"")+",nandos,"+t.spotify.periTotal.peri.title}},[t._v(" Share on Twitter ")]):t._e()],1),t.current.data.user?n("div",{},[n("div",{staticClass:"grid grid-cols-2 gap-3 place-items-center opacity-50"},[t._m(1),n("div",[n("a",{attrs:{href:t.current.data.user.data.external_urls.spotify,target:"_blank",title:"Spotify profile"}},[n("img",{staticClass:"items-center justify-center pb-2",staticStyle:{width:"140px"},attrs:{src:a("f06f")}})])])])]):t._e()],1):t._e(),"NOT_LISTENING"===t.action.main?n("div",{staticClass:"text-black"},[n("Nolistening")],1):t._e(),n("transition",{attrs:{name:"fade",mode:"out-in"}},["NOT_LOGGED_IN"===t.action.main?n("div",[n("Notloggedin")],1):t._e()]),n("div",{staticClass:"divide-y divide-gray-400/50 my-5"})],1)])]),t._m(2)]),n("pre",[t._v(t._s(t.listeners))])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"\n                flex\n                items-center\n                justify-center\n                space-x-2\n                animate-bounce\n                pb-3\n              "},[a("div",{staticClass:"w-8 h-8 bg-black rounded-full"}),a("div",{staticClass:"w-8 h-8 bg-black rounded-full"}),a("div",{staticClass:"w-8 h-8 bg-black rounded-full"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a",{attrs:{href:"https://www.nandos.co.uk/",target:"_blank",title:"Nando's"}},[n("img",{staticClass:"items-center justify-center mb-5 nandos-logo",staticStyle:{width:"120px"},attrs:{src:a("30c0")}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n        pt-5\n        bottom-5\n        right-5\n        pr-3\n        pl-3\n        pb-5\n        max-w-md\n        rounded-none\n        sm:px-10\n        mx-auto\n        text-white\n        z-20\n        xl:fixed\n        font-mono\n        sm:max-w-lg\n      "},[n("div",{staticClass:"copy"},[t._v(" Built with "),n("img",{staticClass:"inline",staticStyle:{width:"36px"},attrs:{src:a("b860")}}),t._v(" by "),n("a",{attrs:{href:"https://miguelpuig.com/",target:"_blank"}},[t._v(" deck1187hw")])])])}],s=a("1da1"),i=(a("96cf"),a("2ef0")),o=a.n(i),c=(a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("9861"),a("7a8d")),l=a.n(c),u=a("ec26"),p=a("bc3a"),d=a.n(p),f="spotify_auth_state",m="spotify_code_verifier",g="spotify_access_token",h="spotify_access_token_expires_in",b="spotify_access_token_refresh",v="user-read-playback-state",y="98a7381e0e614cfbbbd57bc772c8fed1",_="https://perimood.miguelpuig.com/callback",x="S256",w="https://accounts.spotify.com";function k(){var t=l()(),e=t.code_challenge,a=t.code_verifier,n=Object(u["a"])();return localStorage.setItem(m,a),localStorage.setItem(f,n),"".concat(w,"/authorize?")+new URLSearchParams({client_id:y,response_type:"code",redirect_uri:_,code_challenge_method:x,show_dialog:!1,code_challenge:e,scope:v,state:n}).toString()}function C(){window.location.href=k()}function P(){localStorage.setItem(g,""),localStorage.setItem(h,""),localStorage.setItem(b,"")}function O(t,e){return S.apply(this,arguments)}function S(){return S=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,r,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=localStorage.getItem(f),localStorage.removeItem(f),e===n){t.next=4;break}return t.abrupt("return",{error:!0});case 4:return r={headers:{"content-type":"application/x-www-form-urlencoded"}},s={client_id:y,grant_type:"authorization_code",code:a,redirect_uri:_,code_verifier:localStorage.getItem(m)},t.prev=6,t.next=9,d.a.post("".concat(w,"/api/token"),new URLSearchParams(s).toString(),r);case 9:return i=t.sent,t.abrupt("return",i.data);case 13:return t.prev=13,t.t0=t["catch"](6),t.abrupt("return",{error:!0});case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))),S.apply(this,arguments)}function N(){return T.apply(this,arguments)}function T(){return T=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem(b),a={headers:{"content-type":"application/x-www-form-urlencoded"}},n={client_id:y,grant_type:"refresh_token",refresh_token:e},t.prev=3,t.next=6,d.a.post("".concat(w,"/api/token"),new URLSearchParams(n).toString(),a);case 6:return r=t.sent,E(r.data),t.abrupt("return",r.data);case 11:return t.prev=11,t.t0=t["catch"](3),t.abrupt("return",{error:!0});case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),T.apply(this,arguments)}function E(t){var e=t.access_token,a=t.expires_in,n=t.refresh_token;localStorage.setItem(g,e),localStorage.setItem(h,Math.floor(Date.now()/1e3)+a),localStorage.setItem(b,n)}function I(){return localStorage.getItem(g)}var j=C;function R(t){var e={title:"",color:""};return t>=0&&t<.2&&(e={title:"extra-mild",color:"#5a642d"}),t>=.2&&t<.4&&(e={title:"mild",color:"#97c31e"}),t>=.4&&t<.6&&(e={title:"medium",color:"#faa500"}),t>=.6&&t<.8&&(e={title:"hot",color:"#ce1a23"}),t>=.8&&t<1&&(e={title:"extra-hot",color:"#46230f"}),e}function A(t){var e=t.valence+t.danceability+t.energy,a=e/3,n=R(a);return{peri:n,percentage:Math.ceil(100*a),tf:a}}a("99af"),a("e9c4");var L="https://api.spotify.com/v1";function U(t){return F.apply(this,arguments)}function F(){return F=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("".concat("https://perimood.miguelpuig.com/","/api/song/").concat(e),{},{headers:{Authorization:"Bearer ".concat(I())}});case 2:return a=t.sent,t.abrupt("return",{status:a.status,data:a.data});case 4:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}function D(){return M.apply(this,arguments)}function M(){return M=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={user:null,currentlyPlaying:null,audioFeatures:null},t.next=3,G();case 3:if(e.user=t.sent,401!==e.user.status&&""!==I()){t.next=15;break}return t.next=7,N();case 7:if(a=t.sent,!a.access_token){t.next=14;break}return t.next=11,G();case 11:e.user=t.sent,t.next=15;break;case 14:return t.abrupt("return",{status:401,data:"Oops no log in at all..."});case 15:if(200===e.user.status){t.next=17;break}return t.abrupt("return",{status:e.user.status,data:e.user.data});case 17:return t.next=19,$();case 19:if(e.currentlyPlaying=t.sent,200===e.currentlyPlaying.status){t.next=22;break}return t.abrupt("return",{status:e.currentlyPlaying.status,data:e.currentlyPlaying.data});case 22:if(o.a.get(e.currentlyPlaying,"data.item.id")){t.next=24;break}return t.abrupt("return",{status:204,data:"No song identified"});case 24:return t.next=26,z(e.currentlyPlaying.data.item.id);case 26:if(e.audioFeatures=t.sent,o.a.get(e.audioFeatures,"data.audio_features[0]")){t.next=29;break}return t.abrupt("return",{status:204,data:"No audio features identified"});case 29:return t.abrupt("return",{status:200,data:e});case 30:case"end":return t.stop()}}),t)}))),M.apply(this,arguments)}function $(){return V.apply(this,arguments)}function V(){return V=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={method:"get",url:"".concat(L,"/me/player/currently-playing"),headers:{Authorization:"Bearer ".concat(I())}},t.prev=1,t.next=4,d()(e);case 4:return a=t.sent,t.abrupt("return",{status:a.status||204,data:a.data});case 8:if(t.prev=8,t.t0=t["catch"](1),!o.a.get(t.t0,"response.data.error.status")){t.next=14;break}return t.abrupt("return",{status:t.t0.response.data.error.status,data:t.t0.response.data.error.message});case 14:throw{status:500,message:JSON.stringify(t.t0)};case 15:case"end":return t.stop()}}),t,null,[[1,8]])}))),V.apply(this,arguments)}function z(t){return Y.apply(this,arguments)}function Y(){return Y=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw"Specify some track ids";case 3:return a={method:"get",url:"".concat(L,"/audio-features?ids=").concat(e),headers:{Authorization:"Bearer ".concat(I())}},t.next=6,d()(a);case 6:return n=t.sent,t.abrupt("return",{status:n.status,data:n.data});case 10:if(t.prev=10,t.t0=t["catch"](0),!o.a.get(t.t0,"response.data.error.status")){t.next=16;break}return t.abrupt("return",{status:t.t0.response.data.error.status,data:t.t0.response.data.error.message});case 16:throw{status:500,message:JSON.stringify(t.t0)};case 17:case"end":return t.stop()}}),t,null,[[0,10]])}))),Y.apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){return H=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("".concat(L,"/me"),{headers:{Authorization:"Bearer ".concat(I())}});case 3:return e=t.sent,t.abrupt("return",{status:e.status,data:e.data});case 7:if(t.prev=7,t.t0=t["catch"](0),!o.a.get(t.t0,"response.data.error.status")){t.next=13;break}return t.abrupt("return",{status:t.t0.response.data.error.status,data:t.t0.response.data.error.message});case 13:throw{status:500,message:JSON.stringify(t.t0)};case 14:case"end":return t.stop()}}),t,null,[[0,7]])}))),H.apply(this,arguments)}var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.audioFeatures?a("div",{class:"positiveness positiveness-"+t.keyPositive+" pt-1 pb-1"},[t._v(" "+t._s(t.mainText)+": "+t._s(Math.ceil(100*t.audioFeatures[t.keyPositive]))+"% - "),a("span",{class:"pl-1 pr-1 w-44\tbadge-"+t.getPositiveness(t.keyPositive,t.audioFeatures).peri.title+" text-white",style:"background-color:"+t.getPositiveness(t.keyPositive,t.audioFeatures).peri.color+"; border:none"},[t._v(t._s(t.getPositiveness(t.keyPositive,t.audioFeatures).peri.title))]),a("Question",{staticClass:"invisible xl:visible",attrs:{"main-text":t.getExplanation()}})],1):t._e()},J=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"inline-block pl-1 tooltip cursor-help",attrs:{"data-tip":t.mainText}},[a("svg",{staticClass:"bi bi-question-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}}),a("path",{attrs:{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"}})])])},q=[],Q={name:"Question",methods:{},props:["mainText"]},W=Q,X=a("2877"),Z=Object(X["a"])(W,K,q,!1,null,null,null),tt=Z.exports,et={components:{Question:tt},props:["mainText","audioFeatures","keyPositive"],data:function(){return{explanation:"",positiveness:{peri:null,percentage:null,tf:null}}},name:"Positiveness",created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.positiveness={};case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getExplanation:function(){switch(this.keyPositive){case"valence":return"Valence describes the musical positiveness conveyed by a track. Tracks with high valence sound more positive (happy, cheerful, euphoric), while tracks with low valence sound more negative (sad, depressed, angry).";case"danceability":return"Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity.";case"energy":return"Energy is a measure from 0.0 to 1.0 and represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy."}},getPositiveness:function(t,e){var a=e[t],n=R(a);return{peri:n,percentage:Math.ceil(100*a),tf:a}}}},at=et,nt=(a("a7a9"),Object(X["a"])(at,B,J,!1,null,null,null)),rt=nt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"grid grid-cols-1gap-2 place-items-center"},[a("div",{staticClass:"opacity-100 pt-5",staticStyle:{color:"#1db954"}},[a("svg",{staticClass:"h-16 w-16",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[a("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z","clip-rule":"evenodd"}}),a("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"}})])])]),t._m(0),a("div",{staticClass:"grid grid-cols-2 gap-3 place-items-center"})])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"grid grid-cols-1 gap-3 place-items-center pt-10 pb-10"},[a("h1",{staticClass:"text-3xl opacity-60 font-extrabold"},[t._v("Not playing?")]),a("p",[t._v("Play something on Spotify and come back.")])])}],ot={name:"Playback",methods:{next:function(){}}},ct=ot,lt=Object(X["a"])(ct,st,it,!1,null,null,null),ut=lt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("a",{staticClass:"\n      flex\n      items-center\n      justify-center\n      rounded-none\n      w-full\n      px-14\n      py-2\n      mt-2\n      space-x-3\n      text-2xl text-center\n      bg-transparent\n      transition-colors\n      duration-200\n      transform\n      border\n      font-sans\n      dark:text-white\n      dark:border-white\n      dark:hover:bg-white\n      dark:hover:text-black\n      hover:bg-black hover:text-white\n      subpixel-antialiased\n      font-bold\n      border-black\n      uppercase\n      text-black\n      tracking-wide\n      animate-bounce\n    ",attrs:{href:"javascript:void(0)"},on:{click:t.login}},[a("span",{staticClass:"text-xl"},[t._v("What are you listening?")])]),t._m(1)])},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"grid grid-cols-2 gap-3 place-items-center mb-7"},[n("img",{staticClass:"items-center justify-center opacity-30",staticStyle:{width:"140px"},attrs:{src:a("f06f")}}),n("img",{staticClass:"\n        items-center\n        grayscale\n        justify-center\n        opacity-30\n        mb-3\n        nandos-logo\n      ",staticStyle:{width:"120px"},attrs:{src:a("30c0")}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"text-center text-sm mt-7 opacity-60 text-black"},[t._v(" Click above to give permission "),a("br"),a("small",[t._v("We won't share any information with anyone or store it anywhere")])])}],ft={name:"Playback",methods:{login:function(){j()}}},mt=ft,gt=(a("0e3e"),Object(X["a"])(mt,pt,dt,!1,null,"65f659cf",null)),ht=gt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative"},[a("a",{staticClass:"\n      inset-0\n      z-10\n      h-full\n      bg-black\n      text-center\n      flex flex-col\n      items-center\n      justify-center\n      opacity-0\n      hover:opacity-100\n      bg-opacity-60\n      duration-300\n    "}),a("div",{staticClass:"relative"},[a("div",{staticClass:"flex flex-wrap content-center"},[a("a",{attrs:{href:t.spotify.trackUrl,target:"_blank"}},[t.spotify.image?a("img",{key:t.spotify.image,staticClass:"mx-auto",attrs:{src:t.spotify.image,alt:t.spotify.songTitle}}):t._e()])])]),a("div",{staticClass:"description mt-4"},[a("h3",{staticClass:"font-semibold"},[t._v(t._s(t.spotify.songTitle))]),a("p",{staticClass:"text-xs"},[t._v(t._s(t.spotify.artistName))]),a("p",{staticClass:"text-xs"},[t._v(t._s(t.spotify.albumName)+" - "+t._s(t.spotify.albumYear))])])])},vt=[],yt={name:"Albumcover",props:["spotify","periOmeter"],methods:{}},_t=yt,xt=Object(X["a"])(_t,bt,vt,!1,null,null,null),wt=xt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative"},[a("a",{staticClass:"\n      inset-0\n      z-10\n      h-full\n      bg-black\n      text-center\n      flex flex-col\n      items-center\n      justify-center\n      opacity-0\n      hover:opacity-100\n      bg-opacity-60\n      duration-300\n    "}),a("div",{staticClass:"relative"},[a("div",{staticClass:"flex flex-wrap content-center"},[t.lastListenedFood.image.aspectRatio_1_1.res916x916?a("img",{key:t.lastListenedFood.image.aspectRatio_1_1.res916x916,staticClass:"mx-auto",attrs:{src:t.lastListenedFood.image.aspectRatio_1_1.res916x916,alt:t.lastListenedFood.displayName}}):t._e()])]),a("div",{staticClass:"description mt-4"},[a("h3",{staticClass:"font-semibold"},[t._v(t._s(t.lastListenedFood.displayName))]),a("p",{staticClass:"text-xs"},[t._v(t._s(t.lastListenedFood.description))])]),a("div",{staticClass:"description mt-4"},[a("h3",{staticClass:"font-bold"},[t._v(" Listened by "),a("span",{},[t._v(t._s(t.listenerUser.id))])]),a("p",{staticClass:"text-xs"},[t._v(t._s(t.listenerUser.created))])])])},Ct=[],Pt={name:"Menucover",props:["listeners"],methods:{},computed:{lastListenedFood:function(){return this.listeners[0].foodData[0]},listenerUser:function(){var t=Date(this.listeners[0].created._seconds);return{id:this.listeners[0].id,created:t}}}},Ot=Pt,St=Object(X["a"])(Ot,kt,Ct,!1,null,null,null),Nt=St.exports,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"\n      grid grid-cols-1\n      gap-3\n      place-items-center\n      pb-4\n      text-black\n      pt-8\n      text-center\n    "},[a("div",{staticClass:"hungry items-center justify-center"},[a("h2",{staticClass:"text-2xl"},[t._v("Hungry?")]),a("p",{staticClass:"lead"},[t._v("Order "+t._s(t.periOmeter))])])]),a("div",{staticClass:"flex flex-wrap place-items-center"},[a("div",{staticClass:"w-full sm:w-1/2 mb-4"},[a("a",{staticClass:"\n          flex\n          items-center\n          justify-center\n          rounded-none\n          w-full\n          px-10\n          py-2\n          text-base\n          bg-transparent\n          transition-colors\n          duration-200\n          transform\n          border\n          hover:bg-white hover:text-black hover:border-black\n          dark:bg-white dark:text-black dark:border-black\n          subpixel-antialiased\n          border-black\n          uppercase\n          text-black\n          tracking-wide\n        ",attrs:{href:"https://order.nandos.co.uk/store/store-selection?sauce="+t.periOmeter,target:"_blank"}},[a("span",{staticClass:"text-xl"},[t._v("Delivery")])])]),a("div",{staticClass:"w-full sm:w-1/2 mb-4"},[a("a",{staticClass:"\n          flex\n          items-center\n          justify-center\n          rounded-none\n          w-full\n          px-10\n          py-2\n          text-base\n          bg-transparent\n          transition-colors\n          duration-200\n          transform\n          border\n          hover:bg-white hover:text-black hover:border-black\n          dark:bg-white dark:text-black dark:border-black\n          subpixel-antialiased\n          border-black\n          uppercase\n          text-black\n          tracking-wide\n        ",attrs:{href:"https://www.nandos.co.uk/order/search?sauce="+t.periOmeter,target:"_blank"}},[a("span",{staticClass:"text-xl"},[t._v("Collect")])])])])])},Et=[],It={name:"Hungry",props:["periOmeter"],methods:{}},jt=It,Rt=Object(X["a"])(jt,Tt,Et,!1,null,null,null),At=Rt.exports,Lt=a("9c32"),Ut="dd MMMM yyyy HH:mm:ss",Ft={image:null,songTitle:null,albumName:null,albumYear:null,artistName:null,audioFeatures:null,getTrackExternalUrl:null,gradient:"rgba(42, 51, 61, 1), rgba(66, 78, 92, 1)"},Dt={id:null,data:{user:null,audioFeatures:null,currentlyPlaying:null}},Mt={name:"Home",components:{Positiveness:rt,Nolistening:ut,Albumcover:wt,Menucover:Nt,Notloggedin:ht,Hungry:At},data:function(){return{listeners:[],envs:Object({VUE_APP_SILENT_REFRESH_SECONDS:"60",VUE_APP_SPOTIFY_API_URL:"https://api.spotify.com",VUE_APP_SPOTIFY_ACCOUNT_URL:"https://accounts.spotify.com",VUE_APP_SPOTIFY_CLIENT_ID:"98a7381e0e614cfbbbd57bc772c8fed1",VUE_APP_SPOTIFY_REDIRECT_URI:"https://perimood.miguelpuig.com/callback",VUE_APP_NANDOS_API_SERVICE_URL:"https://perimood.miguelpuig.com/",NODE_ENV:"production",BASE_URL:"/"}),periTotal:null,action:{main:null},now:this.$date(new Date,Ut),current:Dt,spotify:Ft,spoti:null,periometer:"medium"}},methods:{login:function(){j()},imagePath:function(t){return a("8b8d")("./periometer-"+t+".svg")},logout:function(){P(),location.reload()},getToken:function(){return I()},getListeners:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U(this.currentTrackId);case 2:e=t.sent,this.listeners=o.a.get(e,"data.listeners")?e.data.listeners:[],console.log("LISTENERS",this.listeners);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refreshUi:function(){this.spotify.image=this.spoti.getImage(),this.spotify.songTitle=this.spoti.getSongTitle(),this.spotify.albumName=this.spoti.getAlbumName(),this.spotify.albumYear=this.spoti.getAlbumYear(),this.spotify.artistName=this.spoti.getArtistName(),this.spotify.trackUrl=this.spoti.getTrackExternalUrl(),this.spotify.gradient=this.spoti.getGradient(),this.spotify.audioFeatures=this.spoti.getAudioFeatures(),this.spotify.periTotal=A(this.spotify.audioFeatures)},refreshApi:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:e=t.sent,200===e.status&&(this.current.id=e.data.currentlyPlaying.data.item.id,this.current.data=e.data,this.action.main="OK"),204===e.status&&(this.action.main="NOT_LISTENING",this.current.data=Dt),401===e.status&&(this.current.data=e.data,this.current.data=Dt,this.action.main="NOT_LOGGED_IN");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),computed:{currentTrackId:function(){return this.current.id},_:function(){return o.a}},watch:{currentTrackId:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.spoti=new Lt(t.current),t.refreshUi(),t.getListeners();case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;this.action.main="LOADING",this.refreshApi(),window.setInterval((function(){"OK"!==t.action.main&&"NOT_LISTENING"!==t.action.main||t.refreshApi()}),8e3),window.setInterval((function(){t.now=t.$date(new Date,Ut)}),1e3)}},$t=Mt,Vt=(a("c71b"),Object(X["a"])($t,n,r,!1,null,"1ae0dd26",null)),zt=Vt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("About")]),a("router-link",{attrs:{to:"/"}},[t._v("Home!")])],1)},Gt=[],Ht={},Bt=Ht,Jt=Object(X["a"])(Bt,Yt,Gt,!1,null,null,null),Kt=Jt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"\n    min-h-screen\n    bg-gradient-to-r\n    from-blue-500\n    to-pink-500\n    py-6\n    flex flex-col\n    justify-center\n    relative\n    overflow-hidden\n    sm:py-12\n    bg-top-left bg-origin-border bg-clip-border bg-fixed bg-center bg-cover\n  "})},Qt=[];a("ac1f"),a("1276");function Wt(){var t,e={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.href.split("?")[1];while(t=a.exec(n))e[t[1]]=decodeURIComponent(t[2]);return e}var Xt={name:"Callback",data:function(){return{envs:Object({VUE_APP_SILENT_REFRESH_SECONDS:"60",VUE_APP_SPOTIFY_API_URL:"https://api.spotify.com",VUE_APP_SPOTIFY_ACCOUNT_URL:"https://accounts.spotify.com",VUE_APP_SPOTIFY_CLIENT_ID:"98a7381e0e614cfbbbd57bc772c8fed1",VUE_APP_SPOTIFY_REDIRECT_URI:"https://perimood.miguelpuig.com/callback",VUE_APP_NANDOS_API_SERVICE_URL:"https://perimood.miguelpuig.com/",NODE_ENV:"production",BASE_URL:"/"}),msg:""}},methods:{},created:function(){var t=this,e=Wt(),a=e.error,n=e.code,r=e.state;a&&(this.msg="There was an error during the authentication"),O(r,n).then((function(e){e.error?(t.msg="Access token retrive error",t.$router.push("/")):(E(e),t.$router.push("/"))}))}},Zt=Xt,te=Object(X["a"])(Zt,qt,Qt,!1,null,null,null),ee=te.exports;e["a"]=[{path:"/",component:zt},{path:"/about",component:Kt},{path:"/callback",component:ee}]},"56d7":function(t,e,a){"use strict";a.r(e),function(t){a("e260"),a("e6cf"),a("cca6"),a("a79d");var e=a("2b0e"),n=a("8c4f"),r=a("3dfd"),s=a("58ca"),i=(a("a766"),a("4c9f")),o=a.n(i),c=a("bd8c"),l=a.n(c),u=a("5665");e["a"].use(n["a"]),e["a"].use(o.a),e["a"].use(s["a"],{refreshOnceOnNavigation:!0}),e["a"].use(l.a);var p=new n["a"]({mode:"history",base:t,routes:u["a"]});new e["a"]({router:p,render:function(t){return t(r["a"])}}).$mount("#app")}.call(this,"/")},6:function(t,e){},7:function(t,e){},8:function(t,e){},"8b8d":function(t,e,a){var n={"./periometer-extra-hot.svg":"184b","./periometer-extra-mild.svg":"d07c","./periometer-hot.svg":"19ab","./periometer-medium.svg":"c5b3","./periometer-mild.svg":"4cbf"};function r(t){var e=s(t);return a(e)}function s(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=s,t.exports=r,r.id="8b8d"},9:function(t,e){},"9c32":function(t,e,a){var n=a("970b").default,r=a("5bc3").default;a("b0c0"),a("99af");var s=a("2ef0"),i=function(){"use strict";function t(e){n(this,t),this.data=e}return r(t,[{key:"getPeriAttrs",value:function(t){var e={title:"",color:""};return t>=0&&t<.2&&(e={title:"extra-mild",color:"#5a642d"}),t>=.2&&t<.4&&(e={title:"mild",color:"#97c31e"}),t>=.4&&t<.6&&(e={title:"medium",color:"#faa500"}),t>=.6&&t<.8&&(e={title:"hot",color:"#ce1a23"}),t>=.8&&t<1&&(e={title:"extra-hot",color:"#46230f"}),e}},{key:"getImage",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.album.images[0].url")?this.data.data.currentlyPlaying.data.item.album.images[0].url:null}},{key:"getSongTitle",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.name")?this.data.data.currentlyPlaying.data.item.name:null}},{key:"getAlbumName",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.album.name")?this.data.data.currentlyPlaying.data.item.album.name:null}},{key:"getAlbumYear",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.album.release_date")?this.data.data.currentlyPlaying.data.item.album.release_date:null}},{key:"getArtistName",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.album.artists[0].name")?this.data.data.currentlyPlaying.data.item.album.artists[0].name:null}},{key:"getAudioFeatures",value:function(){return s.get(this.data,"data.audioFeatures.data.audio_features[0]")?this.data.data.audioFeatures.data.audio_features[0]:null}},{key:"getTrackExternalUrl",value:function(){return s.get(this.data,"data.currentlyPlaying.data.item.external_urls.spotify")?this.data.data.currentlyPlaying.data.item.external_urls.spotify:null}},{key:"getGradient",value:function(){var t=.9,e=["rgba(65, 88, 208, ".concat(t,"), rgba(200, 80, 192, ").concat(t,"), rgba(255, 204, 112, ").concat(t,")"),"rgba(217, 175, 217, ".concat(t,"), rgba(151, 217, 225, ").concat(t,")"),"rgba(255, 229, 59, ".concat(t,"), rgba(255, 37, 37, ").concat(t,")"),"rgba(215, 225, 230, ".concat(t,"), rgba(217, 226, 232, ").concat(t,")"),"rgba(178, 183,237, ".concat(t,"), rgba(232, 138, 152, ").concat(t,")"),"rgba(241, 138,230, ".concat(t,"), rgba(244, 96, 128, ").concat(t,")"),"rgba(76, 174,254, ".concat(t,"), rgba(9, 232, 254, ").concat(t,")"),"rgba(51, 18,108, ".concat(t,"), rgba(48, 200, 204, ").concat(t,")"),"rgba(252, 215,228, ".concat(t,"), rgba(173, 236, 234, ").concat(t,")"),"rgba(250, 241,213, ".concat(t,"), rgba(211, 157, 194, ").concat(t,")"),"rgba(105, 117,222, ".concat(t,"), rgba(116, 84, 175, ").concat(t,")")];return e[Math.floor(Math.random()*e.length)]}}]),t}();t.exports=i},a1c5:function(t,e,a){},a766:function(t,e,a){},a7a9:function(t,e,a){"use strict";a("bb63")},b860:function(t,e,a){t.exports=a.p+"img/chillie.3e962f3a.svg"},bb63:function(t,e,a){},c5b3:function(t,e,a){t.exports=a.p+"img/periometer-medium.60ee98f7.svg"},c71b:function(t,e,a){"use strict";a("a1c5")},d07c:function(t,e,a){t.exports=a.p+"img/periometer-extra-mild.eee35240.svg"},f06f:function(t,e,a){t.exports=a.p+"img/Spotify-Black-Logo.wine.d72f6cea.svg"}});
//# sourceMappingURL=app.15b51cf6.js.map